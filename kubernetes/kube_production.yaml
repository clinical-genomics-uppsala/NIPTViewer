apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: 2021-10-25T10:42:09Z
  labels:
    app: niptviewer
  name: niptviewer
spec:
  containers:
  - name: nginx
    image: smeds84/nginx:1.0.0
    ports:
    - containerPort: 80
      hostport: 80
      protocol: TCP
    - containerPort: 443
      hostport: 443
      protocol: TCP
    volumeMounts:
     - name: staticfiles
       mountPath: /home/app/web/staticfiles
    resources: {}
    securityContext:
      allowPrivilegeEscalation: true
      capabilities: {}
      privileged: false
      readOnlyRootFilesystem: false
      seLinuxOptions: {}
  - name: web
    image: smeds84/niptviewer:v1.4.1
    env:
    - name: DJANGO_ALLOWED_HOSTS
      value: gollum.lul.se 127.0.0.1 localhost
    - name: DEBUG
      value: 1
    - name: "DATABASE"
      value: "mssql"
    - name: "SQL_ENGINE"
      value: "mssql"
    - name: "SQL_DATABASE"
      value: "niptviewer"
    - name: "SQL_HOST"
      value: "SQLH-DB-19"
    - name: "SQL_USER"
      value: "username"
    - name: "SQL_PASSWORD"
      value: "password"
    envFrom:
    - secretRef:
        name: user_secret
    - secretRef:
        name: password_secret
    volumeMounts:
     - name: staticfiles
       mountPath: /home/app/web/staticfiles
     - name: staticfiles
       mountPath: /staticfiles
    resources: {}
    securityContext:
      allowPrivilegeEscalation: true
      capabilities: {}
      privileged: false
      readOnlyRootFilesystem: false
      seLinuxOptions: {}
  volumes:
    - name: staticfiles
      persistentVolumeClaim:
        claimName: niptviewer-staticfiles
  restartPolicy: Always
         

status: {}

